\section{Prozesse}

\subsection{Bestandteile}
\begin{itemize}
    \item eigener Adressraum
    \item Programmcode
    \item Programmdaten
    \item Programm-Counter
    \item Stacks und Stackpointer
    \item Hardwareregister-Inhalte \textit{(Prozess-Kontext)}
    \item Heap-Speicher
    \item Verwaltungsdaten
    \begin{itemize}
        \item Identifier und VaterID
        \item Resourcenliste
        \item Scheduling Parameter
    \end{itemize}
\end{itemize}

\begin{figure}[ht!]
    \includegraphics[scale=.75]{pics/processes}
    \caption{Process Control Block PCB}
\end{figure}

\subsection{Hierarchie und Signale}
Jeder Prozess hat \textbf{Vaterprozess} \textit{(Prozesse erzeugen einander)}.

\subsubsection{Fork}
\begin{lstlisting}
    int pid = fork();
    if(pid == 0){
        printf("Ich bin das Kind mit pid=%d\n", getpid());
    }else if(pid > 0){
        printf("Ich bin der Vater, mein Kind hat die pid=%d\n", pid);
    }else{
        printf("Error: fork() war nicht erfolgreich");
    }
\end{lstlisting}

\subsubsection{Signale}
\begin{itemize}
    \item (17) STOP \textit{(Strg-Z oder bg)}
    \item (19) CONT \textit{(fg)}
    \item (15) SIGTERM \textit{(beenden)}
    \item (9) KILL \textit{(abschließen)}
\end{itemize}

\subsection{Prozesserzeugung}
\begin{enumerate}
    \item fork $\rightarrow$ clone $\rightarrow$ do\_fork $\rightarrow$ copy\_process
    \item neue thread\_info in task\_struct
    \item Kind-Status auf TASK\_UNINTERRUPTABLE
    \item copy\_flags
    \item get\_pid: neue PID für Kind
    \item je nach clone-Parametern: kopieren/gemeinsam nutzen
    \item Scheduler
\end{enumerate}